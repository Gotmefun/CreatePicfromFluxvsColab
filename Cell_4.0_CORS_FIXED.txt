import os,subprocess,time
os.chdir('/content/stable-diffusion-webui')
print("="*60+"\nüöÄ Starting WebUI with CORS fix...\n"+"="*60+"\n‚è±Ô∏è  Wait 60 seconds...\n")
p=subprocess.Popen([
	'python','launch.py',
	'--skip-python-version-check',
	'--skip-torch-cuda-test',
	'--listen',
	'--port=7860',
	'--api',
	'--cors-allow-origins=https://aigen.ptee88.com',
	'--cors-allow-origins=*',
	'--enable-insecure-extension-access',
	'--no-half-vae',
	'--disable-safe-unpickle',
	'--no-hashing',
	'--lowvram',
	'--skip-install',
	'--no-gradio-queue'
],stdout=subprocess.PIPE,stderr=subprocess.PIPE,text=True)
print(f"‚úÖ Starting (PID: {p.pid})\n‚è≥ Waiting...\n")
time.sleep(60)
import urllib.request
try:
	urllib.request.urlopen('http://127.0.0.1:7860')
	print("‚úÖ WebUI running!\nüéØ Next: Cell 4.5\n"+"="*60)
except:
	print("‚ö†Ô∏è  Still starting... wait 1-2 min\n"+"="*60)
